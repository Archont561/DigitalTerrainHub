{% load static %}
{% load widget_tweaks %}

<form 
    id="login-form"
    hx-post="{% url 'user:login' %}" 
    hx-target="#login-form" 
    hx-swap="outerHTML"
    class="space-y-4 md:space-y-6"
    data-show-loader
    data-modal
>
    {% csrf_token %}
    {% if form.non_field_errors %}
        <template class="non-field-errors">
            {% for error in form.non_field_errors %}
                <<li class="whitespace-pre-wrap">{{ error }}</li>
            {% endfor %}
        </template>
    {% endif %}
    {% for field in form %}
      <div>
        <label 
          for="{{ field.id_for_label }}"
          x-data="{ showTooltip: false }"
          class="flex justify-start items-center gap-2 relative mb-2 text-sm font-medium text-gray-900 dark:text-white"
        >
          {{ field.label }}
          {% if field.help_text %}
              <svg 
                fill="#000000"
                width="1em" height="1em" 
                viewBox="0 0 416.979 416.979"
                @mouseenter="showTooltip = true"
                @mouseleave="showTooltip = false"
                class="inline-block"
              >
                <g>
                  <path d="M356.004,61.156c-81.37-81.47-213.377-81.551-294.848-0.182c-81.47,81.371-81.552,213.379-0.181,294.85
                    c81.369,81.47,213.378,81.551,294.849,0.181C437.293,274.636,437.375,142.626,356.004,61.156z M237.6,340.786
                    c0,3.217-2.607,5.822-5.822,5.822h-46.576c-3.215,0-5.822-2.605-5.822-5.822V167.885c0-3.217,2.607-5.822,5.822-5.822h46.576
                    c3.215,0,5.822,2.604,5.822,5.822V340.786z M208.49,137.901c-18.618,0-33.766-15.146-33.766-33.765
                    c0-18.617,15.147-33.766,33.766-33.766c18.619,0,33.766,15.148,33.766,33.766C242.256,122.755,227.107,137.901,208.49,137.901z"/>
                </g>
              </svg>
              
              <!-- Tooltip -->
              <div x-cloak
                x-show="showTooltip" 
                class="absolute left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs rounded py-1 px-2 bottom-full mb-2 w-max"
              >
                  {{ field.help_text }}
              </div>
          {% endif %}
        </label>
        
        {{ field|add_class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500" }}
        
        {% if field.errors %}
            <ul>
                {% for error in field.errors %}
                    <li class="break-words text-red-600"><small>{{ error }}</small></li>
                {% endfor %}
            </ul>
        {% endif %}
      </div>
    {% endfor %}
    <button type="submit" class="transition duration-200 bg-blue-500 hover:bg-blue-600 focus:bg-blue-700 focus:shadow-sm focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50 text-white w-full py-2.5 rounded-lg text-sm shadow-sm hover:shadow-md font-semibold text-center inline-block">
      Create an account
    </button>
  </form>